
# 1) Directive nedir, hangi problemi cozer, nasil kullanilir ?


## ğŸ§© 1. Directive Nedir?

ğŸ“˜ **TanÄ±m:**
**Directive**, Angularâ€™da HTML elementlerinin **davranÄ±ÅŸÄ±nÄ± (behavior)** veya **gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ (appearance)** dinamik olarak deÄŸiÅŸtirmeye yarayan yapÄ±lardÄ±r.

> BaÅŸka bir deyiÅŸle:
> â€œDirective, HTMLâ€™e Angular zekÃ¢sÄ± ekler.â€
> Yani normal bir etiketi, Ã¶zel kurallara gÃ¶re **etkileÅŸimli ve akÄ±llÄ± hale getirir.**

---

## ğŸ¯ 2. Hangi Problemi Ã‡Ã¶zer?

HTML statiktir.
Bir `<div>` veya `<p>` etiketi tek baÅŸÄ±na â€œÅŸartlÄ± gÃ¶rÃ¼nÃ¼mâ€, â€œtekrarlamaâ€ veya â€œdinamik stilâ€ gibi davranÄ±ÅŸlarÄ± yÃ¶netemez.

Directiveâ€™ler bu sÄ±nÄ±rlamayÄ± Ã§Ã¶zer:

* DOM elementlerinin gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ veya davranÄ±ÅŸÄ±nÄ± koÅŸula gÃ¶re deÄŸiÅŸtirir,
* Yeni Ã¶zellikler (`attribute`) ekleyerek HTML sÃ¶zdizimini geniÅŸletir,
* Tekrarlayan HTML mantÄ±klarÄ±nÄ± yeniden kullanÄ±labilir hale getirir.

ğŸ’¡ **Ã–zetle:**

> Directiveâ€™ler, â€œHTMLâ€™in yapamadÄ±ÄŸÄ± davranÄ±ÅŸsal iÅŸleriâ€ Angular dÃ¼zeyinde yapar.

---

## âš™ï¸ 3. Directive TÃ¼rleri

| TÃ¼r                      | AÃ§Ä±klama                                                  | Ã–rnek                                         |
| ------------------------ | --------------------------------------------------------- | --------------------------------------------- |
| **Structural Directive** | DOM yapÄ±sÄ±nÄ± deÄŸiÅŸtirir (ekleme, silme, tekrar etme)      | `*ngIf`, `*ngFor`, `*ngSwitch`                |
| **Attribute Directive**  | Var olan elementin gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ veya davranÄ±ÅŸÄ±nÄ± deÄŸiÅŸtirir | `ngClass`, `ngStyle`, `appHighlight` (custom) |
| **Custom Directive**     | GeliÅŸtiricinin tanÄ±mladÄ±ÄŸÄ± Ã¶zel davranÄ±ÅŸ                  | `@Directive()` ile oluÅŸturulur                |

---

## ğŸ§± 4. Structural Directive Ã–rneÄŸi (`*ngIf`)

```html
<p *ngIf="isLoggedIn">HoÅŸ geldin, kullanÄ±cÄ±!</p>
<p *ngIf="!isLoggedIn">LÃ¼tfen giriÅŸ yapÄ±n.</p>

<ul>
  <li *ngFor="let item of items">{{ item }}</li>
</ul>
```

**app.component.ts**

```ts
export class AppComponent {
  isLoggedIn = false;
  items = ['Elma', 'Armut', 'Muz'];
}
```

ğŸŸ¢ **AÃ§Ä±klama:**

* `*ngIf`, DOMâ€™a koÅŸula gÃ¶re eleman ekler veya kaldÄ±rÄ±r.
* `*ngFor`, bir koleksiyon (array) Ã¼zerindeki her Ã¶ÄŸe iÃ§in yeni bir DOM elemanÄ± oluÅŸturur.
* `isLoggedIn` false olduÄŸunda `<p>` kaldÄ±rÄ±lÄ±r; `items` listesi deÄŸiÅŸirse liste de otomatik gÃ¼ncellenir.

ğŸ’¡ **Soyutlama:** HTML tek baÅŸÄ±na koÅŸullu gÃ¶rÃ¼nÃ¼m veya dÃ¶ngÃ¼ Ã¼retemez â€” Angular bunu DOM dÃ¼zeyinde yapar.


---

## ğŸ¨ 5. Attribute Directive Ã–rneÄŸi (`ngStyle`)


```html
<p [ngStyle]="{ color: isActive ? 'green' : 'gray' }">
  Durum: {{ isActive ? 'Aktif' : 'Pasif' }}
</p>

<div [ngClass]="{ 'highlight': isHighlighted, 'muted': !isHighlighted }">
  Stil durumu: {{ isHighlighted ? 'Vurgulu' : 'Soluk' }}
</div>
```

**app.component.ts**

```ts
export class AppComponent {
  isActive = true;
  isHighlighted = false;
}
```

ğŸŸ¢ **AÃ§Ä±klama:**

* `ngStyle`, CSS stillerini dinamik olarak ayarlar.
* `ngClass`, elemente koÅŸula baÄŸlÄ± olarak bir veya birden fazla CSS sÄ±nÄ±fÄ± ekler/kaldÄ±rÄ±r.
* `isActive` veya `isHighlighted` deÄŸiÅŸtiÄŸinde Angular DOMâ€™u yeniden render eder.

ğŸ’¡ **Soyutlama:**
HTMLâ€™in inline stilini veya statik classâ€™larÄ±nÄ± deÄŸil, **davranÄ±ÅŸsal olarak deÄŸiÅŸebilen bir gÃ¶rÃ¼nÃ¼m katmanÄ±nÄ±** oluÅŸturur.


---

## ğŸ§  6. Custom Directive (Kendi Directiveâ€™ini Yazmak)

- **AmaÃ§:**
AynÄ± davranÄ±ÅŸÄ± birÃ§ok yerde tekrar etmemek iÃ§in Ã¶zel bir directive tanÄ±mlayabilirsin.
- **Not:**
    > Custom Directive'ler ile hem `Strutcural Directive` hem de `Attribute Directive`olusturulabilir

    > Fakat Custom Directive'ler ile genel olarak `Attribute Directive`'ler olusturulur

**highlight.directive.ts**

```ts
import { Directive, ElementRef, HostListener } from '@angular/core';

@Directive({
  selector: '[appHighlight]' // HTMLâ€™de bÃ¶yle Ã§aÄŸrÄ±lÄ±r
})
export class HighlightDirective {
  constructor(private el: ElementRef) {}

  @HostListener('mouseenter') onMouseEnter() {
    this.el.nativeElement.style.backgroundColor = 'yellow';
  }

  @HostListener('mouseleave') onMouseLeave() {
    this.el.nativeElement.style.backgroundColor = '';
  }
}
```

**app.component.html**

```html
<p appHighlight>Ãœzerime gelince sarÄ± oluyorum!</p>
```

ğŸŸ¢ **AÃ§Ä±klama:**

* `@Directive` decoratorâ€™Ä± ile yeni bir directive tanÄ±mlanÄ±r.
* `selector: '[appHighlight]'` â†’ HTML attribute olarak Ã§aÄŸrÄ±lÄ±r.
* `@HostListener` â†’ olaylara tepki verir (Ã¶rneÄŸin fareyle Ã¼zerine gelme).

ğŸ’¡ **SonuÃ§:**
HTML artÄ±k â€œdavranÄ±ÅŸ eklenebilirâ€ hale gelir.
Tekrarlayan davranÄ±ÅŸlar merkezi olarak yÃ¶netilir.

---

## ğŸ§± 7. Best Practiceâ€™ler

| Prensip                                     | AÃ§Ä±klama                                                            |
| ------------------------------------------- | ------------------------------------------------------------------- |
| **1. Tek sorumluluk**                       | Bir directive yalnÄ±zca tek bir davranÄ±ÅŸÄ± kontrol etmeli.            |
| **2. DOM manipÃ¼lasyonunu soyutla**          | `ElementRef` yerine mÃ¼mkÃ¼nse Renderer2 kullan (daha gÃ¼venli).       |
| **3. Yeniden kullanÄ±labilirlik**            | AynÄ± davranÄ±ÅŸÄ± birden fazla elementte kullanmak iÃ§in directive yaz. |
| **4. Ä°simlendirme standardÄ±**               | Custom directive adlarÄ± `appSomething` ÅŸeklinde olmalÄ±.             |
| **5. Structural directive yazarken dikkat** | DOM manipÃ¼lasyonu Angularâ€™Ä±n kendi lifecycleâ€™Ä± ile uyumlu olmalÄ±.   |

---

## ğŸ’¡ Soyutlama CÃ¼mlesi

> **Directive**, Angularâ€™Ä±n HTMLâ€™i â€œdavranÄ±ÅŸsal olarak geniÅŸletmeâ€ aracÄ±dÄ±r.
>
> Structural Directiveâ€™ler DOM yapÄ±sÄ±nÄ± deÄŸiÅŸtirir,
> Attribute Directiveâ€™ler gÃ¶rÃ¼nÃ¼m veya davranÄ±ÅŸÄ± deÄŸiÅŸtirir.
>
> BÃ¶ylece Angular, HTMLâ€™in yapamadÄ±ÄŸÄ± â€œkoÅŸullu, tekrarlayan ve dinamikâ€ iÅŸlevleri framework dÃ¼zeyinde yÃ¶netir.

---



























# Eklemeler

## 1) ngFor icinde kullanilan "track" keywordu

ğŸ§© **`track` Ã–zeti (Angular 17+)**

**TanÄ±m:**
`track`, Angularâ€™Ä±n `@for` yapÄ±sÄ±nda kullanÄ±lan bir Ã¶zelliktir. Angularâ€™a listedeki her elemanÄ±n **benzersiz kimliÄŸini** (Ã¶rneÄŸin `id`) bildirir, bÃ¶ylece liste deÄŸiÅŸtiÄŸinde hangi elemanÄ±n eklenip, hangisinin silindiÄŸini doÄŸru ÅŸekilde anlayabilir.

> Not: Birden fazla alan track ile takip edilebilir

**Ã‡Ã¶zdÃ¼ÄŸÃ¼ Problem:**
Liste gÃ¼ncellendiÄŸinde Angular varsayÄ±lan olarak tÃ¼m DOM elemanlarÄ±nÄ± yeniden oluÅŸturur. Bu gereksiz yeniden render iÅŸlemine ve animasyon/state kaybÄ±na yol aÃ§ar. `track`, sadece deÄŸiÅŸen elemanlarÄ±n DOMâ€™da gÃ¼ncellenmesini saÄŸlar â†’ **performans artar** ve **UI tutarlÄ±lÄ±ÄŸÄ± korunur.**

**Benim Ã–rneÄŸimde KullanÄ±mÄ±:**

```html
@for (category of selectedCategories; track category.id) {
  <nz-tag (click)="removeCategory(category.id)">
    {{ category.name }}
  </nz-tag>
}
```

Burada `track category.id`, Angularâ€™a her kategoriyi `id` deÄŸeriyle tanÄ±masÄ±nÄ± sÃ¶yler.
KullanÄ±cÄ± bir tagâ€™e tÄ±klayÄ±p onu kaldÄ±rdÄ±ÄŸÄ±nda sadece o tag DOMâ€™dan silinir, diÄŸer tagâ€™ler yerinde kalÄ±r.
### ğŸ§© `track` **KULLANILMAZSA**

```html
@for (category of selectedCategories) {
  <nz-tag>{{ category.name }}</nz-tag>
}
```

VarsayalÄ±m `selectedCategories` ÅŸu ÅŸekilde:

```ts
selectedCategories = [
  { id: 1, name: 'Work' },
  { id: 2, name: 'Personal' },
  { id: 3, name: 'Fitness' }
];
```

KullanÄ±cÄ± gidip â€œPersonalâ€ tagâ€™ine tÄ±kladÄ± ve onu kaldÄ±rdÄ±n:

```ts
this.selectedCategories = [
  { id: 1, name: 'Work' },
  { id: 3, name: 'Fitness' }
];
```

---

### ğŸ” Angularâ€™Ä±n Ne YaptÄ±ÄŸÄ±:

`track` **olmadÄ±ÄŸÄ±** iÃ§in Angular ÅŸunu dÃ¼ÅŸÃ¼nÃ¼r:

> â€œListe deÄŸiÅŸti, o zaman tÃ¼m `<nz-tag>`â€™larÄ± baÅŸtan oluÅŸturayÄ±m.â€

Yani DOMâ€™daki 3 tagâ€™i de tamamen **siler** ve sadece 2 tagâ€™i **yeniden oluÅŸturur**.

---

### âš ï¸ Bunun sonucunda neler olur?

1. **TÃ¼m tag bileÅŸenleri yeniden render edilir.**
   Yani sadece â€œPersonalâ€ silinmedi, â€œWorkâ€ ve â€œFitnessâ€ da aslÄ±nda DOMâ€™dan silinip yeniden eklendi.

2. **Animasyonlar, geÃ§iÅŸ efektleri, focus stateâ€™ler kaybolur.**
   Ã–rneÄŸin bir tag Ã¼zerinde hover efekti veya kÃ¼Ã§Ã¼k bir geÃ§iÅŸ animasyonu varsa, o da yeniden tetiklenir.

3. **Ä°Ã§ durum (state) kaybolabilir.**
   Diyelim ki her tag bir alt bileÅŸen (`<category-tag>`) olsaydÄ± ve iÃ§inde kendi local stateâ€™i (Ã¶rneÄŸin bir tooltip aÃ§Ä±k mÄ±?) olsaydÄ±, o state resetlenirdi.

4. **Performans dÃ¼ÅŸer.**
   DOM manipÃ¼lasyonlarÄ± pahalÄ±dÄ±r.
   5â€“10 tag ile fark etmez ama 100+ elemanlÄ± bir listede fark **Ã§ok bariz** olur.

---

## ğŸ§© Durum 2 â€” `track` **KULLANILIRSA**

```html
@for (category of selectedCategories; track category.id) {
  <nz-tag>{{ category.name }}</nz-tag>
}
```

AynÄ± iÅŸlemi (Personalâ€™Ä± silmeyi) yaptÄ±ÄŸÄ±nda Angular artÄ±k ÅŸunu bilir:

> â€œBu listedeki Ã¶ÄŸeler `id` deÄŸerine gÃ¶re eÅŸleÅŸiyor.
> 2 numaralÄ± eleman (Personal) silindi, 1 ve 3 aynÄ± kaldÄ±.â€

Bu durumda Angular yalnÄ±zca:

* `id = 2` olan tagâ€™i **DOMâ€™dan kaldÄ±rÄ±r**,
* `id = 1` ve `id = 3` olan tagâ€™leri **yerinde bÄ±rakÄ±r**.






















