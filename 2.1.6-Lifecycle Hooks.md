
# 1) Lifecycle Hooks nedir, hangi problemi cozer, nasil kullanilir

## 🧩 1. Lifecycle Hooks Nedir?

📘 **Tanım:**
**Lifecycle Hooks**, Angular component’lerinin yaşam döngüsünde (oluşturulma, güncellenme, yok edilme gibi aşamalarda) belirli noktalarda **otomatik olarak çağrılan özel metotlardır.**

> Başka bir deyişle:
> Angular her component için “yaşam olayları” üretir,
> ve sen bu olaylara “hook” (kanca) takarak o anlarda özel işlemler yapabilirsin.

---

## 🎯 2. Hangi Problemi Çözer?

Angular component’leri sadece HTML ve veriden ibaret değildir —
arka planda:

* DOM’a eklenir (`create`),
* Input değerleri güncellenir (`update`),
* DOM’dan kaldırılır (`destroy`).

Eğer bu aşamalarda:

* API’den veri çekmek,
* log kaydı tutmak,
* event listener eklemek/kaldırmak
  gibi işlemler yapman gerekiyorsa, **Lifecycle Hooks** kullanırsın.

Yani problem şudur:

> “Component’in ne zaman oluştuğunu, güncellendiğini veya silindiğini nereden bileceğim?”
> **Cevap:** Angular bunu senin yerine yönetir — sadece doğru hook’a “kanca atarsın”.

---

## ⚙️ 3. En Temel Lifecycle Hooks (ve Ne Zaman Çalışırlar)

| Hook                | Ne Zaman Çalışır?                                                                    | Ne İçin Kullanılır?                                                |
| ------------------- | ------------------------------------------------------------------------------------ | ------------------------------------------------------------------ |
| `ngOnInit()`        | Component ilk kez oluşturulduğunda (constructor’dan sonra, view render olmadan önce) | Başlangıçta veri çekmek, state hazırlamak                          |
| `ngOnChanges()`     | `@Input()` ile gelen veri değiştiğinde                                               | Parent’tan gelen input değişimini izlemek                          |
| `ngDoCheck()`       | Angular değişiklik kontrolü (change detection) sırasında                             | Özelleştirilmiş değişiklik kontrolü                                |
| `ngAfterViewInit()` | Component’in view (HTML) tamamen render edildiğinde                                  | DOM erişimi gerektiren işlemler                                    |
| `ngOnDestroy()`     | Component DOM’dan kaldırılırken                                                      | Temizlik: abonelik iptali, timer durdurma, event listener kaldırma |

---

## 💡 4. En Sık Kullanılan 3 Hook’la Basit Örnek

### 🧱 a) `ngOnInit()` → “Component oluşturulduğunda bir kez çalışır”

**app.component.ts**

```ts
export class AppComponent implements OnInit {
  message = '';

  ngOnInit() {
    this.message = 'Component yüklendi!';
    console.log('ngOnInit tetiklendi');
  }
}
```

**app.component.html**

```html
<p>{{ message }}</p>
```

🟢 **Açıklama:**
Angular, component’i ilk kez oluşturduğunda `ngOnInit()` bir kez çağrılır.
Bu yüzden **API istekleri** veya **ilk yükleme işlemleri** genellikle burada yapılır.

---

### ⚙️ b) `ngOnChanges()` → “Parent’tan gelen input değiştiğinde tetiklenir”

**child.component.ts**

```ts
import { Input, OnChanges, SimpleChanges } from '@angular/core';

export class ChildComponent implements OnChanges {
  @Input() data!: string;

  ngOnChanges(changes: SimpleChanges) {
    console.log('Yeni veri geldi:', changes['data'].currentValue);
  }
}
```

🟢 **Açıklama:**
Parent’ta `data` değiştiğinde Angular bu hook’u çağırır.
Yani “child component, parent’tan gelen yeni veriye tepki verir.”

---

### 🧹 c) `ngOnDestroy()` → “Component kaldırılmadan hemen önce çalışır”

**app.component.ts**

```ts
export class AppComponent implements OnDestroy {
  timer!: any;

  ngOnInit() {
    this.timer = setInterval(() => console.log('çalışıyor...'), 1000);
  }

  ngOnDestroy() {
    clearInterval(this.timer);
    console.log('Component yok edildi.');
  }
}
```

🟢 **Açıklama:**
`ngOnDestroy()` genelde temizlik (cleanup) için kullanılır:

* `setInterval`, `subscribe`, `addEventListener` gibi kaynakları serbest bırakmak.
  Böylece **memory leak (bellek sızıntısı)** önlenir.

---

## 🧠 5. Best Practice’ler

| Prensip                                         | Açıklama                                                            |
| ----------------------------------------------- | ------------------------------------------------------------------- |
| **1. ngOnInit içinde veri çek**                 | Component hazır olduğunda API çağrısı yap. Constructor’da değil.    |
| **2. ngOnDestroy’da cleanup yap**               | Subscriptions, timer’lar, event listener’lar mutlaka temizlenmeli.  |
| **3. Gereksiz Hook kullanma**                   | Her hook ek bir lifecycle cost getirir, yalnızca gerekliyse kullan. |
| **4. ngOnChanges ile veri izleme**              | @Input() verileri değişiyorsa, state’i burada senkronize et.        |
| **5. Angular’ın kontrol akışına müdahale etme** | DOM’u erken erişme (ngOnInit öncesi) hataya yol açabilir.           |

---

## 🧩 6. Soyutlama Cümlesi

> **Lifecycle Hooks**, Angular’daki component’lerin “yaşam evrelerine” bağlanmanı sağlar.
>
> Component’in **doğduğu**, **değiştiği** veya **öldüğü** anda özel davranışlar tanımlayabilirsin.
> Böylece Angular’ın otomatik yaşam döngüsüne “kancalar” ekleyerek uygulamanın her aşamasında kontrol sahibi olursun.

---
