

# 1) 


## 🧩 **1️⃣ Parent → Child Veri Akışı (`@Input`)**

### 📘 1. Kavramsal Tanım

`@Input()` decorator’ı, **üst bileşenden (parent)** gelen veriyi **alt bileşene (child)** aktarmak için kullanılır.
Yani component hiyerarşisinde **tek yönlü veri akışı (top → down)** sağlar.

> 🔹 **Soyut tanım:**
> Parent veriyi üretir → Child bu veriyi kullanır (ama değiştirmez).

---

### ⚙️ 2. Temel Kullanım

**parent.component.html**

```html
<app-user-card [userName]="'Mustafa Günaltay'"></app-user-card>
```

**user-card.component.ts (child)**

```ts
import { Component, Input } from '@angular/core';

@Component({
  selector: 'app-user-card',
  template: `<p>Kullanıcı: {{ userName }}</p>`
})
export class UserCardComponent {
  @Input() userName!: string;
}
```

🧠 **Açıklama:**

* `[userName]` → parent’ta property binding yapıldı.
* `@Input()` → child tarafında, parent’tan gelen değeri yakaladı.
* Veri tek yönlüdür: child değiştirse bile parent etkilenmez.

---

### 🧩 3. Zorunlu Input Tanımlama (`@Input({ required: true })`)

Angular 16+ sürümleriyle birlikte, artık bir input’un **zorunlu (required)** olduğunu derleme aşamasında belirtebilirsin.
Bu özellik, component’in doğru şekilde kullanılmasını garanti eder.

```ts
@Input({ required: true }) userName!: string;
```

💡 **Ne işe yarar?**

* Parent component `userName` değerini göndermezse derleme zamanında uyarı verir.
* Bu sayede **runtime hataları** yerine **build-time güvenliği** sağlanır.
* Kodun okunabilirliğini ve bakımını kolaylaştırır.

---

### 🧩 4. İleri Seviye: `@Input()` Alias, Setter, ve Değişim Takibi

#### 🔹 Alias Kullanımı

Parent’ta kullanılan property adı ile child’taki değişken adı farklı olabilir:

```ts
@Input('heading') title!: string;
```

```html
<app-header [heading]="'Ana Sayfa'"></app-header>
```

Burada parent `[heading]` gönderir ama child içinde `title` ismiyle kullanılır.

---

#### 🔹 Setter Kullanımı

Bazı durumlarda input geldiği anda ek işlem yapmak istersin (ör. API çağrısı veya formatlama):

```ts
private _id!: number;

@Input() set userId(value: number) {
  this._id = value;
  this.loadUser(value);
}
```

Setter yaklaşımı, değişen veriyi yakalayarak anında yan etki (side-effect) üretmeni sağlar.

---

#### 🔹 `ngOnChanges()` ile Değişiklikleri İzleme

Bir veya birden fazla input’un değişimini aynı anda izlemek için:

```ts
ngOnChanges(changes: SimpleChanges): void {
  if (changes['userName']) {
    console.log('Yeni kullanıcı adı:', changes['userName'].currentValue);
  }
}
```

---

### ⚡ 5. Best Practice’ler

| Prensip                                    | Açıklama                                                    |
| ------------------------------------------ | ----------------------------------------------------------- |
| **1. Tek yönlü veri akışı**                | Child, parent verisini sadece kullanır; değiştirmez.        |
| **2. Input’ları salt okunur gibi düşün**   | State değişikliği gerekiyorsa kopya üret.                   |
| **3. `!` veya varsayılan değer kullan**    | `undefined` hatalarını önler.                               |
| **4. `@Input({ required: true })` kullan** | Parent’tan veri gelmediğinde build-time’da hata yakalarsın. |
| **5. Setter veya `ngOnChanges` kullan**    | Veri değişimine bağlı işlemleri burada yönet.               |
| **6. `OnPush` + immutable veri tercih et** | Performansı artırır, change detection yükünü azaltır.       |

---

### 💡 Soyutlama Cümlesi

> `@Input()`, component hiyerarşisinde **yukarıdan aşağıya veri akışını** sağlar.
> Child component, parent’tan aldığı veriyi **gösterir ama değiştirmez** — bu da **tek yönlü veri akışını (unidirectional flow)** garanti eder.

---






# 2) ngOnChanges() Metodu

Harika, aşağıdaki notunu **bozmadan**, **birden fazla `@Input()`** olduğunda `changes` kullanımını entegre ettim. Eklediğim yeni bölüm “### 🔀 Birden Fazla `@Input()` Olduğunda” başlığıyla geldi.

---

Harika bir nokta yakaladın 👏
`ngOnChanges()` Angular’da özellikle **@Input() değerleri değiştiğinde** otomatik tetiklenen bir **lifecycle hook**’tur.
Yani parent component, child’a yeni bir değer gönderdiğinde Angular bu metodu **otomatik olarak çağırır.**

Aşağıda hem kavramsal hem de pratik olarak detaylandıralım 👇

---

## 🧩 `ngOnChanges()` Nedir?

### 📘 Kavramsal Tanım

`ngOnChanges()` metodu, bir component’in `@Input()` ile aldığı değerlerden **herhangi biri değiştiğinde** Angular tarafından otomatik çalıştırılır.
Bu sayede component, **gelen verideki değişikliklere tepki verebilir.**

---

## ⚙️ Parametre: `SimpleChanges`

Angular, bu metoda otomatik olarak `SimpleChanges` tipinde bir nesne gönderir.

```ts
ngOnChanges(changes: SimpleChanges): void {
  console.log(changes);
}
```

`SimpleChanges` bir nesnedir ve her bir değişen input için şu bilgileri içerir:

| Alan              | Açıklama                        |
| ----------------- | ------------------------------- |
| **previousValue** | Önceki değer                    |
| **currentValue**  | Yeni değer                      |
| **firstChange**   | Bu değişiklik ilk mi? (boolean) |

---

## 🧱 Pratik Örnek

**parent.component.html**

```html
<input type="text" [(ngModel)]="userName" placeholder="Ad giriniz" />
<app-user-card [userName]="userName"></app-user-card>
```

**user-card.component.ts (child)**

```ts
import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';

@Component({
  selector: 'app-user-card',
  template: `<p>Kullanıcı: {{ userName }}</p>`
})
export class UserCardComponent implements OnChanges {
  @Input() userName!: string;

  ngOnChanges(changes: SimpleChanges): void {
    if (changes['userName']) {
      const prev = changes['userName'].previousValue;
      const curr = changes['userName'].currentValue;

      console.log(`Kullanıcı adı değişti: ${prev} → ${curr}`);
    }
  }
}
```

### 🧠 Ne Oluyor?

* Parent’ta kullanıcı input’a bir şey yazdığında `userName` değeri değişir.
* Bu değişiklik `@Input()` ile child’a iletilir.
* Angular bunu fark eder ve `ngOnChanges()`’i **otomatik olarak çağırır.**
* `changes['userName']` içinden eski ve yeni değeri okuyabilirsin.

---

### 🔀 Birden Fazla `@Input()` Olduğunda

Birden çok `@Input()` varsa, `changes` nesnesi **değişen her input’u ayrı bir anahtar (key)** olarak içerir.

**parent.component.html**

```html
<app-user-card [userName]="name" [age]="userAge"></app-user-card>
```

**user-card.component.ts (child)**

```ts
import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';

@Component({
  selector: 'app-user-card',
  template: `<p>{{ userName }} ({{ age }} yaşında)</p>`
})
export class UserCardComponent implements OnChanges {
  @Input() userName!: string;
  @Input() age!: number;

  ngOnChanges(changes: SimpleChanges): void {
    if (changes['userName']) {
      const { previousValue, currentValue, firstChange } = changes['userName'];
      console.log(`userName: ${previousValue} → ${currentValue}`, { firstChange });
    }

    if (changes['age']) {
      const { previousValue, currentValue, firstChange } = changes['age'];
      console.log(`age: ${previousValue} → ${currentValue}`, { firstChange });
    }
  }
}
```

🧠 **Notlar:**

* Sadece **değişen** input’lar `changes` içinde bulunur.
* İlk atamada `firstChange: true` olur.
* Değer aynı kalırsa Angular `ngOnChanges`’i tetiklemez.

---

## 💡 Ne Zaman Kullanılır?

`ngOnChanges()` genellikle şu durumlarda kullanılır:

| Senaryo                                    | Amaç                                      |
| ------------------------------------------ | ----------------------------------------- |
| Parent veriyi dinamik olarak güncelliyorsa | Child tarafında buna tepki vermek         |
| Input geldiğinde işlem yapmak gerekiyorsa  | Örneğin formatlama veya API çağrısı       |
| Birden fazla input varsa                   | Her biri için değişimi ayrı ayrı yönetmek |

---

## ⚠️ Önemli Not

* `ngOnChanges()` **yalnızca @Input() değerleri değiştiğinde** tetiklenir.
  Yani component içindeki normal değişkenler bu metoda etki etmez.
* Angular `OnChanges` arayüzünü (interface) uygularsan IntelliSense desteği ve tip güvenliği sağlar:

  ```ts
  export class UserCardComponent implements OnChanges { ... }
  ```

---

### 💬 Özetle:

> `ngOnChanges()` → Angular’ın “@Input değişti” sinyalidir.
> Değişen veriyi `SimpleChanges` içinden okuyabilir, önceki ve yeni değerleri karşılaştırarak tepki verebilirsin.

---

